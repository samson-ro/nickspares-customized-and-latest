<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Customer Service History</title>
    <style>
        body { font-family: Arial, sans-serif; font-size: 12px; padding: 20px; }
        h2, h3 { text-align: center; }
        h4 { margin-top: 30px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #bbb; padding: 5px; text-align: left; }
        th { background-color: #eee; }
    </style>
</head>
<body>

<h2>Customer Service History</h2>
<h3>{{ selected_customer.name }}</h3>

<h4>Motorcycles</h4>
<ul>
{% for m in motorcycles %}
    <li>{{ m.model.name }} - {{ m.license_plate }}</li>
{% empty %}
    <li>No motorcycles</li>
{% endfor %}
</ul>

<h4>Repairs</h4>
{% if repairs %}
<table>
    <thead><tr><th>Date</th><th>Motorcycle</th><th>Cost</th><th>Status</th></tr></thead>
    <tbody>
    {% for r in repairs %}
        <tr><td>{{ r.date_in|date:"Y-m-d" }}</td><td>{{ r.motorcycle }}</td><td>{{ r.cost_of_service }}</td><td>{{ r.status }}</td></tr>
    {% endfor %}
    </tbody>
</table>
{% else %}<p>No repairs found.</p>{% endif %}

<h4>Invoices</h4>
{% if invoices %}
<table>
    <thead><tr><th>Date</th><th>Amount</th><th>Paid</th><th>Method</th></tr></thead>
    <tbody>
    {% for i in invoices %}
        <tr><td>{{ i.date_issued|date:"Y-m-d" }}</td><td>{{ i.amount }}</td><td>{{ i.paid }}</td><td>{{ i.payment_method }}</td></tr>
    {% endfor %}
    </tbody>
</table>
{% else %}<p>No invoices found.</p>{% endif %}

</body>
</html>
